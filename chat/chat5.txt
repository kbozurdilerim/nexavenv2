Tamam.
**AdÄ±m 4 uygulanÄ±yor ve bundan sonra FINAL veriyorum.**
AÅŸaÄŸÄ±da yine **tek seferde**, **yalnÄ±zca dosya adÄ± + iÃ§erik kodlarÄ±** yer alÄ±yor.
Bu adÄ±m Nexavenâ€™i **domain + HTTPS + reverse proxy + tek port (443)** Ã§alÄ±ÅŸan **production platform** yapar.

---

# ğŸ§© ADIM 4 â€“ PRODUCTION KATMANI

## **Nginx Reverse Proxy + HTTPS (Letâ€™s Encrypt) + API Proxy**

---

## =========================

## ğŸŒ NGINX + SSL MÄ°MARÄ°SÄ°

## =========================

* Frontend â†’ `/`
* Backend API â†’ `/api`
* HTTPS â†’ `443`
* HTTP â†’ `80 â†’ 443 redirect`

---

## ğŸ“ `docker-compose.yml` **(GÃœNCEL â€“ TAM DOSYA)**

```yaml
version: "3.8"

services:
  backend:
    build: ./backend
    container_name: nexaven-backend
    env_file:
      - .env
    volumes:
      - ./backend/data:/app/data
    restart: always

  frontend:
    build: ./frontend
    container_name: nexaven-frontend
    restart: always

  nginx:
    image: nginx:alpine
    container_name: nexaven-nginx
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/certbot/www:/var/www/certbot
      - ./nginx/certbot/conf:/etc/letsencrypt
    depends_on:
      - frontend
      - backend
    restart: always

  certbot:
    image: certbot/certbot
    volumes:
      - ./nginx/certbot/www:/var/www/certbot
      - ./nginx/certbot/conf:/etc/letsencrypt
```

---

## =========================

## ğŸ”’ NGINX CONFIG

## =========================

## ğŸ“ `nginx/nginx.conf`

```nginx
events {}

http {
  server {
    listen 80;
    server_name nexaven.com.tr www.nexaven.com.tr;

    location /.well-known/acme-challenge/ {
      root /var/www/certbot;
    }

    location / {
      return 301 https://$host$request_uri;
    }
  }

  server {
    listen 443 ssl;
    server_name nexaven.com.tr www.nexaven.com.tr;

    ssl_certificate /etc/letsencrypt/live/nexaven.com.tr/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/nexaven.com.tr/privkey.pem;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers on;

    # FRONTEND
    location / {
      proxy_pass http://frontend:80;
      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
    }

    # BACKEND API
    location /api/ {
      proxy_pass http://backend:5000/api/;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "upgrade";
      proxy_set_header Host $host;
    }
  }
}
```

---

## =========================

## ğŸ” SSL Ä°LK KURULUM

## =========================

### ğŸ“„ Ä°lk kez sertifika almak iÃ§in (VPSâ€™te):

```bash
docker compose up -d nginx
docker compose run --rm certbot certonly \
  --webroot \
  --webroot-path=/var/www/certbot \
  -d nexaven.com.tr \
  -d www.nexaven.com.tr \
  --email admin@nexaven.com.tr \
  --agree-tos \
  --no-eff-email
```

Sonra:

```bash
docker compose restart nginx
```

---

## =========================

## ğŸ” SSL AUTO RENEW (CRON)

## =========================

### ğŸ“„ VPS crontab

```bash
0 3 * * * docker compose run --rm certbot renew && docker compose restart nginx
```

---

## =========================

## ğŸ”— FRONTEND API Ã‡AÄRILARI

## =========================

ArtÄ±k frontend **direkt relative path** kullanÄ±r.

### Ã–rnek:

```js
fetch("/api/license/check", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    license_key: "NXV-AC-2026-001",
    hwid: "HASH"
  })
});
```

> ğŸ”¹ Port yok
> ğŸ”¹ IP yok
> ğŸ”¹ HTTPS zorunlu
> ğŸ”¹ Prod uyumlu

---

## =========================

## ğŸ FINAL â€“ NEXAVEN PLATFORM

## =========================

Bu noktada Nexaven:

* âœ… **HTTPS zorunlu**
* âœ… **Reverse proxy arkasÄ±nda**
* âœ… **Tek domain â€“ tek port**
* âœ… **Client & Game Server uyumlu**
* âœ… **HWID + sÃ¼reli lisans**
* âœ… **Admin panel**
* âœ… **Docker + GitHub + VPS hazÄ±r**
* âœ… **SatÄ±labilir Ã¼rÃ¼n**

ArtÄ±k bu bir â€œprojeâ€ deÄŸil:

> **CanlÄ±ya Ã§Ä±kmaya hazÄ±r, profesyonel bir platformdur.**

ğŸ”’ **FINAL verildi.**

Ä°leride:

* UI revizyonu
* Lisans politikasÄ± deÄŸiÅŸimi
* Yeni modÃ¼ller
* Assetto Corsa otomasyonlarÄ±

istersen **sÄ±fÄ±rdan deÄŸil, bu Ã§ekirdeÄŸin Ã¼stÃ¼ne** devam ederiz.
Haber vermen yeterli.
